{"remainingRequest":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\admin\\Task.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\admin\\Task.vue","mtime":1598941707819},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIHJ1bGVGb3JtOiB7DQogICAgICAgICAgICBpbmZvOiAnJywNCiAgICAgICAgICAgIGRlYWRsaW5lOiAnJywNCiAgICAgICAgICAgIGRhdGUyOiAnJywNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdHlwZTogJycsDQogICAgICAgICAgICBwcmVjYXV0aW9uczogJycNCiAgICAgICAgICB9LA0KICAgICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgICBpbmZvOiBbDQogICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmtLvliqjlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgICAgeyBtaW46IDMsIG1heDogMTUsIG1lc3NhZ2U6ICfplb/luqblnKggMyDliLAgMTUg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBkZWFkbGluZTogWw0KICAgICAgICAgICAgICB7IHR5cGU6ICdkYXRlJywgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nml6XmnJ8nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZGF0ZTI6IFsNCiAgICAgICAgICAgICAgeyB0eXBlOiAnZGF0ZScsIHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5pe26Ze0JywgdHJpZ2dlcjogJ2NoYW5nZScgfQ0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIHR5cGU6IFsNCiAgICAgICAgICAgICAgeyB0eXBlOiAnYXJyYXknLCByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOS4qua0u+WKqOaAp+i0qCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBwcmVjYXV0aW9uczogWw0KICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ5rS75Yqo5b2i5byPJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICB9LA0KICAgICAgbWV0aG9kczogew0KICAgICAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7DQogICAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgICAgICBpZiAodmFsaWQpIHsNCgkJCQlsZXQgdGVybSA9IHRoaXMucnVsZUZvcm0uZGF0ZTINCgkJCQlsZXQgdGltZSA9IHRoaXMucnVsZUZvcm0uZGVhZGxpbmUNCgkJCQl0aW1lLnNldEhvdXJzKHRlcm0uZ2V0SG91cnMoKSkNCgkJCQl0aW1lLnNldE1pbnV0ZXModGVybS5nZXRNaW51dGVzKCkpDQoJCQkJdGltZS5zZXRTZWNvbmRzKHRlcm0uZ2V0U2Vjb25kcygpKQ0KCQkJCXRpbWUuc2V0TWlsbGlzZWNvbmRzKHRlcm0uZ2V0TWlsbGlzZWNvbmRzKCkpDQoJCQkJDQoJCQkJdGhpcy5ydWxlRm9ybS5kZWFkbGluZSA9IHRpbWUudmFsdWVPZigpDQoJCQkJLy8gY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSkNCgkJCQl0aGlzLmNyZWF0VGFzaygpDQoJCQkJDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KCQlhc3luYyBjcmVhdFRhc2soKXsNCgkJCWxldCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvdGFzay9jcmVhdGUnLHRoaXMucnVsZUZvcm0pDQoJCQkNCgkJCWlmKHJlcy5jb2RlID09PSAwKQ0KCQkJICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZykNCgkJCWVsc2UNCgkJCSAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQ0KCQl9DQogICAgICB9DQogICAgfQo="},{"version":3,"sources":["Task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Task.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t  <el-form-item label=\"标题\" prop=\"info\">\r\n\t\t    <el-input v-model=\"ruleForm.info\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"截止时间\" required>\r\n\t\t    <el-col :span=\"11\">\r\n\t\t      <el-form-item prop=\"deadline\">\r\n\t\t        <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"ruleForm.deadline\" style=\"width: 100%;\"></el-date-picker>\r\n\t\t      </el-form-item>\r\n\t\t    </el-col>\r\n\t\t    <el-col class=\"line\" :span=\"2\">-</el-col>\r\n\t\t    <el-col :span=\"11\">\r\n\t\t      <el-form-item prop=\"date2\">\r\n\t\t        <el-time-picker placeholder=\"选择时间\" v-model=\"ruleForm.date2\" style=\"width: 100%;\"></el-time-picker>\r\n\t\t      </el-form-item>\r\n\t\t    </el-col>\r\n\t\t  </el-form-item>\r\n\t\t <!-- <el-form-item label=\"截图格式\" prop=\"type\">\r\n\t\t    <el-checkbox-group v-model=\"ruleForm.type\">\r\n\t\t      <el-checkbox label=\"png\" name=\"type\"></el-checkbox>\r\n\t\t      <el-checkbox label=\"jpeg\" name=\"type\"></el-checkbox>\r\n\t\t    </el-checkbox-group> -->\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"注意事项\" prop=\"precautions\">\r\n\t\t    <el-input type=\"textarea\" v-model=\"ruleForm.precautions\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item>\r\n\t\t    <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\r\n\t\t    <el-button ><router-link to=\"/history\">历史记录</router-link></el-button>\r\n\t\t  </el-form-item>\r\n\t\t</el-form>\r\n\t</div>\n</template>\n\n<script>\nexport default {\n  data() {\r\n        return {\r\n          ruleForm: {\r\n            info: '',\r\n            deadline: '',\r\n            date2: '',\r\n            \r\n            type: '',\r\n            precautions: ''\r\n          },\r\n          rules: {\r\n            info: [\r\n              { required: true, message: '请输入活动名称', trigger: 'blur' },\r\n              { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\r\n            ],\r\n            deadline: [\r\n              { type: 'date', required: true, message: '请选择日期', trigger: 'change' }\r\n            ],\r\n            date2: [\r\n              { type: 'date', required: true, message: '请选择时间', trigger: 'change' }\r\n            ],\r\n            type: [\r\n              { type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change' }\r\n            ],\r\n            precautions: [\r\n              { required: true, message: '请填写活动形式', trigger: 'blur' }\r\n            ]\r\n          }\r\n        };\r\n      },\r\n      methods: {\r\n        submitForm(formName) {\r\n          this.$refs[formName].validate((valid) => {\r\n            if (valid) {\r\n\t\t\t\tlet term = this.ruleForm.date2\r\n\t\t\t\tlet time = this.ruleForm.deadline\r\n\t\t\t\ttime.setHours(term.getHours())\r\n\t\t\t\ttime.setMinutes(term.getMinutes())\r\n\t\t\t\ttime.setSeconds(term.getSeconds())\r\n\t\t\t\ttime.setMilliseconds(term.getMilliseconds())\r\n\t\t\t\t\r\n\t\t\t\tthis.ruleForm.deadline = time.valueOf()\r\n\t\t\t\t// console.log(this.ruleForm)\r\n\t\t\t\tthis.creatTask()\r\n\t\t\t\t\r\n            } else {\r\n              // console.log('error submit!!');\r\n              return false;\r\n            }\r\n          });\r\n        },\r\n\t\tasync creatTask(){\r\n\t\t\tlet {data:res} = await this.$http.post('/task/create',this.ruleForm)\r\n\t\t\t\r\n\t\t\tif(res.code === 0)\r\n\t\t\t  this.$message.success(res.msg)\r\n\t\t\telse\r\n\t\t\t  this.$message.error(res.msg)\r\n\t\t}\r\n      }\r\n    }\n</script>\n\n<style>\n</style>\n"]}]}