(function(e){function t(t){for(var a,o,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"03ea":function(e,t,r){"use strict";var a=r("b09b"),n=r.n(a);n.a},"262f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("bc3a"),s=r.n(n),o={},i=s.a.create(o);i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=i,window.axios=i,Object.defineProperties(e.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},a["default"].use(Plugin);Plugin;var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",[r("router-view")],1)])},u=[],c={name:"app",components:{}},d=c,m=r("2877"),p=Object(m["a"])(d,l,u,!1,null,null,null),f=p.exports,h=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"loginForm",staticClass:"login-box",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("h3",{staticClass:"login-title"},[e._v("欢迎登录")]),r("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入学号"},model:{value:e.form.stuId,callback:function(t){e.$set(e.form,"stuId",t)},expression:"form.stuId"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"stuPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.stuPassword,callback:function(t){e.$set(e.form,"stuPassword",t)},expression:"form.stuPassword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("loginForm")}}},[e._v("登录")]),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.onRegister()}}},[e._v("注册")])],1)],1),r("el-dialog",{attrs:{title:"温馨提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("span",[e._v(e._s(e.msg))]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},b=[],v=(r("ac1f"),r("5319"),r("96cf"),r("1da1")),k={name:"Login",data:function(){return{form:{stuId:"",stuPassword:""},msg:"请输入学号和密码",rules:{stuId:[{required:!0,message:"学号不可为空",trigger:"blur"}],stuPassword:[{required:!0,message:"密码不可为空",trigger:"blur"}]},dialogVisible:!1}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}return e.next=3,t.$http.post("student/login",t.form);case 3:if(a=e.sent,0!==a.data.result.code){e.next=10;break}window.sessionStorage.getItem("token")&&window.sessionStorage.removeItem("token"),window.sessionStorage.setItem("token",a.data.token),t.$router.push("/upload"),e.next=13;break;case 10:return t.msg=a.data.result.msg,t.dialogVisible=!0,e.abrupt("return",!1);case 13:e.next=17;break;case 15:return t.dialogVisible=!0,e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onRegister:function(){this.$router.replace("/register")},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}},w=k,x=(r("6a94"),Object(m["a"])(w,g,b,!1,null,"17820bde",null)),y=x.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"ruleForm",staticClass:"login-box",attrs:{model:e.ruleForm,size:"small",rules:e.rules,"label-width":"80px"}},[r("h3",{staticClass:"login-title"},[e._v("注册")]),r("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入学号"},model:{value:e.ruleForm.stuId,callback:function(t){e.$set(e.ruleForm,"stuId",t)},expression:"ruleForm.stuId"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"stuName"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.ruleForm.stuName,callback:function(t){e.$set(e.ruleForm,"stuName",t)},expression:"ruleForm.stuName"}})],1),r("el-form-item",{attrs:{label:"学院"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.college,callback:function(t){e.college=t},expression:"college"}},e._l(e.collegeList,(function(e){return r("el-option",{key:e.collegeId,attrs:{label:e.collegeId,value:e.collegeId}})})),1)],1),r("el-form-item",{attrs:{label:"年级"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ruleForm.grade,callback:function(t){e.$set(e.ruleForm,"grade",t)},expression:"ruleForm.grade"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"专业",hidden:e.hiddenMajor}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.majorCode,callback:function(t){e.majorCode=t},expression:"majorCode"}},e._l(e.majorList,(function(e){return r("el-option",{key:e.majorcode,attrs:{label:e.mjrName,value:e.majorcode}})})),1)],1),r("el-form-item",{attrs:{label:"班级",hidden:e.hiddenClass}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ruleForm.monitoridStu,callback:function(t){e.$set(e.ruleForm,"monitoridStu",t)},expression:"ruleForm.monitoridStu"}},e._l(e.classList,(function(e){return r("el-option",{key:e.monitoridClass,attrs:{label:e.className,value:e.monitoridClass}})})),1)],1),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.stuPassword,callback:function(t){e.$set(e.ruleForm,"stuPassword",t)},expression:"ruleForm.stuPassword"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)},_=[],$={name:"Register",data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},r=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.ruleForm.stuPassword?a(new Error("两次输入密码不一致!")):a()};return{ruleForm:{stuId:"",stuName:"",stuPassword:"",grade:"",monitoridStu:"",collegenameStu:"",majornameStu:"",checkPass:""},rules:{stuId:[{required:!0,message:"学号不可为空",trigger:"blur"}],stuName:[{required:!0,message:"姓名不可为空",trigger:"blur"}],pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}]},options:[{value:"2017",label:"2017"},{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"}],collegeList:[],majorList:[],college:"",hiddenMajor:!0,majorCode:"",classList:[],hiddenClass:!0}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.onRegister()}))},onRegister:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/student/register",this.ruleForm);case 2:t=e.sent,r=t.data,0===r.code?(this.$message.success("注册成功！"),this.$router.push("/login")):this.$message.error(r.msg);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),findAllCollege:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/college/findAll");case 2:r=t.sent,a=r.data,e.collegeList=a;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.findAllCollege()},watch:{college:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.hiddenMajor=!1,this.ruleForm.collegenameStu=this.college,e.next=4,this.$http.get("/major/findMajors/",{params:{collegenameStu:this.college}});case 4:t=e.sent,r=t.data,this.majorList=r;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),majorCode:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t in this.hiddenClass=!1,this.majorList)this.majorList[t].majorcode==this.majorCode&&(this.ruleForm.majornameStu=this.majorList[t].mjrName);return e.next=4,this.$http.get("/banji/findClass",{params:{grade:this.ruleForm.grade,majorId:this.majorCode}});case 4:r=e.sent,a=r.data,this.classList=a;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},j=$,I=(r("03ea"),Object(m["a"])(j,F,_,!1,null,"70760a20",null)),C=I.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{staticClass:"upload-demo login-box",attrs:{drag:"",action:"http://127.0.0.1:8081/ssss/screenshot/upload",multiple:"","on-success":e.success,"on-error":e.error,"before-upload":e.isUploaded,data:e.screenshot,headers:e.token}},[r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r("el-select",{staticClass:"selectTask",attrs:{placeholder:"请选择要提交的标题",size:"mini"},model:{value:e.screenshot.taskidScrnsht,callback:function(t){e.$set(e.screenshot,"taskidScrnsht",t)},expression:"screenshot.taskidScrnsht"}},e._l(e.taskList,(function(e){return r("el-option",{key:e.sstId,attrs:{label:e.info,value:e.sstId,disabled:e.disabled}})})),1),r("div",{staticClass:"el-upload__tip admin",attrs:{slot:"tip"},on:{click:function(t){return e.pushUrl()}},slot:"tip"},[r("el-button",{staticClass:"monitor",attrs:{type:"infor",size:"mini"}},[e._v(" 班长？点击这里 ")])],1)],1),r("i",{staticClass:"el-icon-upload",attrs:{hidden:e.hidden}}),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])])])],1)},R=[],O={name:"screenshots",data:function(){return{token:{token:window.sessionStorage.getItem("token")},hidden:!1,taskList:[],screenshot:{path:"",submitted:!0,taskidScrnsht:"",studentidScrnsht:""}}},methods:{success:function(e,t,r){this.hidden=!0,this.$message.success(e.msg)},error:function(e,t,r){this.$message.error(e.msg)},isUploaded:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/screenshot/isuploaded",{params:{taskId:t.screenshot.taskidScrnsht}});case 2:r=e.sent,r.data;case 4:case"end":return e.stop()}}),e)})))()},pushUrl:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/student/ismonitor");case 2:r=t.sent,a=r.data,!0===a?e.$router.push("/admin"):e.$message.warning("没有访问权限");case 5:case"end":return t.stop()}}),t)})))()},getTasks:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={mntName:window.sessionStorage.getItem("token")},t.next=3,e.$http.post("/task/tasks",r);case 3:a=t.sent,n=a.data,e.taskList=n;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.getTasks()}},P=O,L=(r("6763"),Object(m["a"])(P,S,R,!1,null,"235974ef",null)),M=L.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-container",{staticClass:"con",staticStyle:{height:"520px",border:"1px solid #eee",width:"70%"}},[r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"25%"}},[r("el-menu",{attrs:{"default-openeds":["1"],router:"","default-active":"stuinfo"}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-caret-bottom"}),e._v("主页")]),r("el-menu-item-group",[r("el-menu-item",{attrs:{index:"stuinfo"}},[r("i",{staticClass:"el-icon-guide"}),e._v("我的班级")]),r("el-menu-item",{attrs:{index:"task"}},[r("i",{staticClass:"el-icon-s-order"}),e._v("发布任务")]),r("el-menu-item",{attrs:{index:"detail"}},[r("i",{staticClass:"el-icon-picture-outline"}),e._v("查看详情")])],1)],2)],1)],1),r("el-container",[r("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[r("span",{staticClass:"text"},[e._v(e._s(e.myClass.className))]),r("el-dropdown",{staticStyle:{"margin-right":"1%"},attrs:{size:"small"}},[r("i",{staticClass:"el-icon-more"}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[e._v("管理班级")])],1)],1),r("span",[e._v(e._s(e.myClass.monitor.mntName))])],1),r("el-main",{staticStyle:{position:"relative"}},[r("router-view")],1)],1)],1)],1)},N=[],T={data:function(){return{tableData:[],myClass:{}}},methods:{findMyClass:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/banji/findMyClass");case 2:r=t.sent,a=r.data,0===a.code?e.myClass=a.data:e.$message.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.findMyClass()}},z=T,E=(r("bd0f"),Object(m["a"])(z,q,N,!1,null,"3598d114",null)),A=E.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{attrs:{data:e.tableData,size:"mini"}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),r("el-table-column",{attrs:{prop:"stuName",label:"姓名",width:"120"}}),r("el-table-column",{attrs:{sortable:"",prop:"stuId",label:"学号",width:"150"}}),r("el-table-column",{attrs:{prop:"screenshot.submitted",label:"状态",width:"80",filters:[{text:"已上传",value:!0},{text:"未上传",value:!1}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:null!==t.row.screenshot.submitted?"success":"warning","close-transition":""}},[e._v(e._s(t.row.screenshot.submitted?"已上传":"未上传"))])]}}])}),r("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-select",{attrs:{placeholder:"选择要查看的标题",size:"mini"},model:{value:e.taskId,callback:function(t){e.taskId=t},expression:"taskId"}},e._l(e.taskList,(function(e){return r("el-option",{key:e.sstId,attrs:{label:e.info,value:e.sstId,disabled:e.disabled}})})),1)]}}])})],1)],1)},D=[],U=(r("b0c0"),{data:function(){return{tableData:[],taskId:"",taskList:[]}},methods:{formatter:function(e,t){return e.name},filterTag:function(e,t){return t.screenshot.submitted===e},getTasks:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={mntName:window.sessionStorage.getItem("token")},t.next=3,e.$http.post("/task/tasks",r);case 3:a=t.sent,n=a.data,e.taskList=n;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.getTasks()},watch:{taskId:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/student/findAll",{params:{taskId:this.taskId}});case 2:t=e.sent,r=t.data,this.tableData=r;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),H=U,B=Object(m["a"])(H,V,D,!1,null,"bb7bc9e2",null),J=B.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标题",prop:"info"}},[r("el-input",{model:{value:e.ruleForm.info,callback:function(t){e.$set(e.ruleForm,"info",t)},expression:"ruleForm.info"}})],1),r("el-form-item",{attrs:{label:"截止时间",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"deadline"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.deadline,callback:function(t){e.$set(e.ruleForm,"deadline",t)},expression:"ruleForm.deadline"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date2"}},[r("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),r("el-form-item",{attrs:{label:"注意事项",prop:"precautions"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.precautions,callback:function(t){e.$set(e.ruleForm,"precautions",t)},expression:"ruleForm.precautions"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),r("el-button",[r("router-link",{attrs:{to:"/history"}},[e._v("历史记录")])],1)],1)],1)],1)},K=[],Q={data:function(){return{ruleForm:{info:"",deadline:"",date2:"",type:"",precautions:""},rules:{info:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],deadline:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],precautions:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=t.ruleForm.date2,a=t.ruleForm.deadline;a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),a.setSeconds(r.getSeconds()),a.setMilliseconds(r.getMilliseconds()),t.ruleForm.deadline=a.valueOf(),t.creatTask()}))},creatTask:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/task/create",e.ruleForm);case 2:r=t.sent,a=r.data,0===a.code?e.$message.success(a.msg):e.$message.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()}}},W=Q,X=Object(m["a"])(W,G,K,!1,null,null,null),Y=X.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"60px"}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-select",{attrs:{placeholder:"选择要查看的标题"},model:{value:e.taskId,callback:function(t){e.taskId=t},expression:"taskId"}},e._l(e.taskList,(function(e){return r("el-option",{key:e.sstId,attrs:{label:e.info,value:e.sstId}})})),1)],1)],1),r("el-button",{staticClass:"dowload",attrs:{type:"success",disabled:e.disabled},on:{click:function(t){return e.download()}}},[e._v("Download All")]),e._l(e.imgUrl.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),(function(t,a){return r("div",{key:t.scrnshtId,staticClass:"imgCon"},[r("div",{staticClass:"demo-image__preview"},[r("el-image",{staticStyle:{width:"90px",height:"190px"},attrs:{src:t.path,"preview-src-list":t.srcList}})],1),r("div",{staticClass:"imgName"},[e._v(e._s(t.studentidScrnsht+"-"+t.student.stuName))])])})),r("div",{staticStyle:{width:"100%"}},[r("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,total:e.total,"page-size":e.pageSize},on:{"current-change":e.currentChangeHandle}})],1)],2)},ee=[],te={data:function(){return{imgUrl:[],disabled:!0,taskId:"",taskList:[],total:100,pageSize:5,currentPage:1}},methods:{getTasks:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={mntName:window.sessionStorage.getItem("token")},t.next=3,e.$http.post("/task/tasks",r);case 3:a=t.sent,n=a.data,e.taskList=n;case 6:case"end":return t.stop()}}),t)})))()},currentChangeHandle:function(e){this.currentPage=e},findAll:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/screenshot/findAll",{params:{taskId:e.taskId}});case 2:r=t.sent,a=r.data,e.imgUrl=a;case 5:case"end":return t.stop()}}),t)})))()},download:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/monitor/download",{params:{taskId:e.taskId}});case 2:r=t.sent,a=r.data,0===a.code?window.open(a.data):e.$message.error("下载失败~");case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getTasks()},watch:{taskId:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabled=!1,e.next=3,this.$http.get("/screenshot/findAll",{params:{taskId:this.taskId}});case 3:t=e.sent,r=t.data,this.imgUrl=r,this.total=r.length;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},re=te,ae=(r("7172"),Object(m["a"])(re,Z,ee,!1,null,"a3f093a2",null)),ne=ae.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-page-header",{on:{back:e.goBack}}),r("br"),r("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,border:""}},[r("el-table-column",{attrs:{fixed:"",prop:"info",label:"标题",width:"150"}}),r("el-table-column",{attrs:{prop:"deadline",label:"截止日期",width:"150"}}),r("el-table-column",{attrs:{prop:"precautions",label:"注意事项",width:"300"}}),r("el-table-column",{attrs:{prop:"sstId",fixed:"right",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",[r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(r){return e.edit(t.row.sstId)}},slot:"reference"},[e._v("编辑")])],1),r("i",{staticStyle:{float:"right"}},[[r("el-popconfirm",{attrs:{title:"这将导致本期已提交的同学的截图全部删除,确定删除吗？"},on:{onConfirm:function(r){return e.deleteHandle(t.row.sstId)}}},[r("el-button",{staticStyle:{color:"#FF0000"},attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]],2)]}}])})],1),r("el-dialog",{attrs:{title:"修改任务",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标题",prop:"info"}},[r("el-input",{model:{value:e.ruleForm.info,callback:function(t){e.$set(e.ruleForm,"info",t)},expression:"ruleForm.info"}})],1),r("el-form-item",{attrs:{label:"截止时间",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"deadline"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.deadline,callback:function(t){e.$set(e.ruleForm,"deadline",t)},expression:"ruleForm.deadline"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date2"}},[r("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),r("el-form-item",{attrs:{label:"注意事项",prop:"precautions"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.precautions,callback:function(t){e.$set(e.ruleForm,"precautions",t)},expression:"ruleForm.precautions"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.update("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},oe=[],ie={data:function(){return{tableData:[],dialogFormVisible:!1,ruleForm:{sstId:"",info:"",deadline:"",date2:"",type:"",precautions:""},rules:{info:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],deadline:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],precautions:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{formatter:function(e,t){return e.name},filterTag:function(e,t){return t.tag===e},goBack:function(){console.log("go back")},findAll:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/task/history");case 2:t=e.sent,r=t.data,this.tableData=r;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteHandle:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/task/delOne",{params:{sstId:e}});case 2:a=r.sent,n=a.data,0===n.code?(t.$message.success("删除成功"),t.findAll()):t.$message.error("删除失败");case 5:case"end":return r.stop()}}),r)})))()},edit:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dialogFormVisible=!0,r.next=3,t.$http.get("/task/findOne",{params:{sstId:e}});case 3:a=r.sent,n=a.data,t.ruleForm=n,s=new Date(n.deadline),t.ruleForm.deadline=s,t.ruleForm.date2=s;case 9:case"end":return r.stop()}}),r)})))()},update:function(e){var t=this;this.dialogFormVisible=!1,this.$refs[e].validate((function(e){if(!e)return!1;var r=t.ruleForm.date2,a=t.ruleForm.deadline;a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),a.setSeconds(r.getSeconds()),a.setMilliseconds(r.getMilliseconds()),t.ruleForm.deadline=a.valueOf(),t.updateTask()}))},updateTask:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/task/update",e.ruleForm);case 2:r=t.sent,a=r.data,0===a.code?(e.findAll(),e.$message.success(a.msg)):e.$message.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.findAll()}},le=ie,ue=Object(m["a"])(le,se,oe,!1,null,"9fec025e",null),ce=ue.exports;a["default"].use(h["a"]);var de=[{path:"/",redirect:"/login"},{path:"/login",component:y},{path:"/register",component:C},{path:"/upload",component:M},{path:"/admin",component:A,children:[{path:"/admin",redirect:"/stuinfo"},{path:"/stuinfo",component:J},{path:"/task",component:Y},{path:"/detail",component:ne},{path:"/history",component:ce}]}],me=new h["a"]({routes:de});me.beforeEach((function(e,t,r){if("/login"===e.path||"/register"===e.path)return r();var a=window.sessionStorage.getItem("token");return a?r():r("/login")}));var pe=me,fe=r("5c96"),he=r.n(fe);r("0fae");a["default"].use(he.a),a["default"].config.productionTip=!0,a["default"].config.devtools=!1,axios.interceptors.request.use((function(e){return sessionStorage.getItem("token")&&(e.headers.token=sessionStorage.getItem("token")),e}),(function(e){return Promise.reject(e)})),axios.defaults.baseURL="http://47.93.87.136:8081/ssss/",a["default"].prototype.$http=axios,new a["default"]({router:pe,render:function(e){return e(f)}}).$mount("#app")},6763:function(e,t,r){"use strict";var a=r("262f"),n=r.n(a);n.a},"6a94":function(e,t,r){"use strict";var a=r("c0c5"),n=r.n(a);n.a},7172:function(e,t,r){"use strict";var a=r("8c0f"),n=r.n(a);n.a},"8c0f":function(e,t,r){},b09b:function(e,t,r){},bd0f:function(e,t,r){"use strict";var a=r("ea7e"),n=r.n(a);n.a},c0c5:function(e,t,r){},ea7e:function(e,t,r){}});
//# sourceMappingURL=app.3755d34a.js.map