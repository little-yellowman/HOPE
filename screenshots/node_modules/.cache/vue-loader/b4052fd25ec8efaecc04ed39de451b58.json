{"remainingRequest":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\screenshots.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\screenshots.vue","mtime":1598854727651},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogInNjcmVlbnNob3RzIiwKCQlkYXRhKCl7CgkJCXJldHVybnsKCQkJCXRva2VuOnt0b2tlbjp3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKX0sCgkJCQloaWRkZW46ZmFsc2UsCgkJCQl0YXNrTGlzdDpbCgkJCQkJCgkJCQldLAoJCQkJc2NyZWVuc2hvdDp7CgkJCQkJcGF0aDonJywKCQkJCQlzdWJtaXR0ZWQ6IHRydWUsCgkJCQkJdGFza2lkU2NybnNodDonJywKCQkJCQlzdHVkZW50aWRTY3Juc2h0OicnCgkJCQl9CgkJCX0KCQl9LAoJCW1ldGhvZHM6ewoJCQlzdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCl7CgkJCQkvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKCQkJCXRoaXMuaGlkZGVuID0gdHJ1ZQoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1zZykKCQkJfSwKCQkJZXJyb3IoZXJyLCBmaWxlLCBmaWxlTGlzdCl7CgkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpCgkJCX0sCgkJCWFzeW5jIGlzVXBsb2FkZWQoZmlsZSl7CgkJCQlsZXQge2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvc2NyZWVuc2hvdC9pc3VwbG9hZGVkJyx7CgkJCQkJcGFyYW1zOnt0YXNrSWQ6dGhpcy5zY3JlZW5zaG90LnRhc2tpZFNjcm5zaHR9CgkJCQl9KQoJCQkJLy8gY29uc29sZS5sb2cocmVzKQoJCQkJLy8gaWYocmVzPT09ZmFsc2UpewoJCQkJLy8gCXRoaXMuJG1lc3NhZ2Uud2FybmluZygi5L2g5bey57uP5o+Q5Lqk6L+H5LqG77yM5LiN55So6YeN5aSN5o+Q5LqkIikKCQkJCS8vIAlyZXR1cm4gZmFsc2UKCQkJCS8vIH1lbHNleyAKCQkJCS8vIAlyZXR1cm4gZmFsc2UKCQkJCS8vIH0KCQkJfSwKCQkJLy8g5aaC5p6c6L+U5Zue57uT5p6c5Li6dHJ1ZeaYr+ePremVv++8jOWwsei3s+i9rAoJCQlhc3luYyBwdXNoVXJsKCl7CgkJCQlsZXQge2RhdGE6cmVzfSA9YXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9zdHVkZW50L2lzbW9uaXRvcicpCgkJCQlpZihyZXM9PT10cnVlKXsKCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2FkbWluJykKCQkJCX1lbHNlewoJCQkJCXRoaXMuJG1lc3NhZ2Uud2FybmluZygi5rKh5pyJ6K6/6Zeu5p2D6ZmQIikKCQkJCX0KCQkJCQoJCQl9LAoJCQkvLyDmoLnmja7nj63plb9pZOiOt+WPluaJgOacieaIquWbvuS7u+WKoe+8jOiuqeWQjOWtpumAieaLqQoJCQlhc3luYyBnZXRUYXNrcygpewoJCQkJbGV0IHRva2VuID0gIHsnbW50TmFtZSc6d2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyl9CgkJCQlsZXQge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy90YXNrL3Rhc2tzJyx0b2tlbikKCQkJCXRoaXMudGFza0xpc3QgPSByZXMKCQkJfQoJCX0sCgkJY3JlYXRlZCgpIHsKCQkJCgkJCXRoaXMuZ2V0VGFza3MoKTsKCQl9Cgl9Cg=="},{"version":3,"sources":["screenshots.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"screenshots.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n    <el-upload\r\n            class=\"upload-demo login-box\"\r\n            drag\r\n            action=\"http://127.0.0.1:8081/ssss/screenshot/upload\"\r\n            multiple :on-success=\"success\" :on-error=\"error\" :before-upload=\"isUploaded\" \r\n\t\t\t:data=\"screenshot\"\r\n\t\t\t:headers=\"token\">\r\n\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">\r\n\t\t\t\t<el-select v-model=\"screenshot.taskidScrnsht\" placeholder=\"请选择要提交的标题\" size=\"mini\" class=\"selectTask\">\r\n\t\t\t\t    <el-option\r\n\t\t\t\t      v-for=\"item in taskList\"\r\n\t\t\t\t      :key=\"item.sstId\"\r\n\t\t\t\t      :label=\"item.info\"\r\n\t\t\t\t      :value=\"item.sstId\"\r\n\t\t\t\t      :disabled=\"item.disabled\">\r\n\t\t\t\t    </el-option>\r\n\t\t\t\t  </el-select>\r\n\t\t\t\t  <div class=\"el-upload__tip admin\" slot=\"tip\" @click=\"pushUrl()\">\r\n\t\t\t\t\t  <el-button type=\"infor\" size=\"mini\" class=\"monitor\">\r\n\t\t\t\t\t\t  班长？点击这里\r\n\t\t\t\t\t  </el-button>\r\n\t\t\t\t  </div>\r\n\t\t\t</div>\r\n        <i class=\"el-icon-upload\" :hidden=\"hidden\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <!-- <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div> -->\r\n\t\t\r\n\t\t\r\n    </el-upload>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"screenshots\",\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\ttoken:{token:window.sessionStorage.getItem(\"token\")},\r\n\t\t\t\thidden:false,\r\n\t\t\t\ttaskList:[\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\tscreenshot:{\r\n\t\t\t\t\tpath:'',\r\n\t\t\t\t\tsubmitted: true,\r\n\t\t\t\t\ttaskidScrnsht:'',\r\n\t\t\t\t\tstudentidScrnsht:''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tsuccess(response, file, fileList){\r\n\t\t\t\t// console.log(response)\r\n\t\t\t\tthis.hidden = true\r\n\t\t\t\tthis.$message.success(response.msg)\r\n\t\t\t},\r\n\t\t\terror(err, file, fileList){\r\n\t\t\t\tthis.$message.error(err.msg)\r\n\t\t\t},\r\n\t\t\tasync isUploaded(file){\r\n\t\t\t\tlet {data:res} = await this.$http.get('/screenshot/isuploaded',{\r\n\t\t\t\t\tparams:{taskId:this.screenshot.taskidScrnsht}\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\t// if(res===false){\r\n\t\t\t\t// \tthis.$message.warning(\"你已经提交过了，不用重复提交\")\r\n\t\t\t\t// \treturn false\r\n\t\t\t\t// }else{ \r\n\t\t\t\t// \treturn false\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\t// 如果返回结果为true是班长，就跳转\r\n\t\t\tasync pushUrl(){\r\n\t\t\t\tlet {data:res} =await this.$http.get('/student/ismonitor')\r\n\t\t\t\tif(res===true){\r\n\t\t\t\t\tthis.$router.push('/admin')\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$message.warning(\"没有访问权限\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 根据班长id获取所有截图任务，让同学选择\r\n\t\t\tasync getTasks(){\r\n\t\t\t\tlet token =  {'mntName':window.sessionStorage.getItem('token')}\r\n\t\t\t\tlet {data: res} = await this.$http.post('/task/tasks',token)\r\n\t\t\t\tthis.taskList = res\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t\r\n\t\t\tthis.getTasks();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n    .login-box {\r\n        border: 1px solid #DCDFE6;\r\n        width: 350px;\r\n        margin: 180px auto;\r\n        padding: 35px 35px 15px 35px;\r\n        border-radius: 5px;\r\n        -webkit-border-radius: 5px;\r\n        -moz-border-radius: 5px;\r\n        box-shadow: 0 0 25px #909399;\r\n    }\r\n\t.admin{\r\n\t\tfloat: right;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\t.selectTask{\r\n\t\twidth: 70%;\r\n\t}\r\n\t.monitor{\r\n\t\tmargin: 0 0;\r\n\t\tpadding: 0 0;\r\n\t}\r\n\t\r\n</style>"]}]}