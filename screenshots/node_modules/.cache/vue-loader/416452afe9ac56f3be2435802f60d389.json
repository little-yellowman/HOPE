{"remainingRequest":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\admin\\History.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\src\\components\\admin\\History.vue","mtime":1598945636397},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Public\\VueProjects\\screenshots\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHRhYmxlRGF0YTogWwoJCQkJCQogICAgCQkJXSwKCQkJCWRpYWxvZ0Zvcm1WaXNpYmxlOmZhbHNlLAoJCQkJcnVsZUZvcm06IHsKCQkJCSAgc3N0SWQ6JycsCgkJCQkgIGluZm86ICcnLAoJCQkJICBkZWFkbGluZTogJycsCgkJCQkgIGRhdGUyOiAnJywKCQkJCSAgCgkJCQkgIHR5cGU6ICcnLAoJCQkJICBwcmVjYXV0aW9uczogJycKCQkJCX0sCgkJCQkKCQkJCXJ1bGVzOiB7CgkJCQkgIGluZm86IFsKCQkJCSAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5rS75Yqo5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQkgICAgeyBtaW46IDMsIG1heDogMTUsIG1lc3NhZ2U6ICfplb/luqblnKggMyDliLAgMTUg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KCQkJCSAgXSwKCQkJCSAgZGVhZGxpbmU6IFsKCQkJCSAgICB7IHR5cGU6ICdkYXRlJywgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nml6XmnJ8nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CgkJCQkgIF0sCgkJCQkgIGRhdGUyOiBbCgkJCQkgICAgeyB0eXBlOiAnZGF0ZScsIHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5pe26Ze0JywgdHJpZ2dlcjogJ2NoYW5nZScgfQoJCQkJICBdLAoJCQkJICB0eXBlOiBbCgkJCQkgICAgeyB0eXBlOiAnYXJyYXknLCByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOS4qua0u+WKqOaAp+i0qCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KCQkJCSAgXSwKCQkJCSAgcHJlY2F1dGlvbnM6IFsKCQkJCSAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ5rS75Yqo5b2i5byPJywgdHJpZ2dlcjogJ2JsdXInIH0KCQkJCSAgXQoJCQkJfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CgkJCWZvcm1hdHRlcihyb3csIGNvbHVtbikgewoJCQkgICAgcmV0dXJuIHJvdy5uYW1lOwoJCQl9LAoJCQlmaWx0ZXJUYWcodmFsdWUsIHJvdykgewoJCQkgICAgcmV0dXJuIHJvdy50YWcgPT09IHZhbHVlOwoJCQl9LAoJCQlnb0JhY2soKSB7CgkJCQljb25zb2xlLmxvZygnZ28gYmFjaycpOwoJCSAgICB9LAogICAgICAgICAgICBmaW5kQWxsOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsZXQge2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvdGFzay9oaXN0b3J5JykKCQkJICAgIHRoaXMudGFibGVEYXRhID0gcmVzCgkJCQkvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgIH0sCgkJCWFzeW5jIGRlbGV0ZUhhbmRsZShzc3RJZCl7CgkJCQlsZXQge2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvdGFzay9kZWxPbmUnLHsKCQkJCQlwYXJhbXM6e3NzdElkOnNzdElkfQoJCQkJfSkKCQkJCS8vIGNvbnNvbGUubG9nKHJlcykKCQkJCWlmKHJlcy5jb2RlID09PSAwKSB7CgkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKQoJCQkJCXRoaXMuZmluZEFsbCgpCgkJCQl9CgkJCQllbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpOWksei0pSIpCQoJCQl9LAoJCQlhc3luYyBlZGl0KHNzdElkKXsKCQkJCXRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCgkJCQlsZXQge2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvdGFzay9maW5kT25lJyx7CgkJCQkJcGFyYW1zOntzc3RJZDpzc3RJZH0KCQkJCX0pCgkJCQkvLyBjb25zb2xlLmxvZyhyZXMpCgkJCQl0aGlzLnJ1bGVGb3JtID0gcmVzCgkJCQkKCQkJCWxldCBkYXRlID0gbmV3IERhdGUocmVzLmRlYWRsaW5lKQoJCQkJdGhpcy5ydWxlRm9ybS5kZWFkbGluZSA9IGRhdGUKCQkJCXRoaXMucnVsZUZvcm0uZGF0ZTIgPSBkYXRlCQoJCQl9LAoJCQl1cGRhdGUocnVsZUZvcm0pewoJCQkJdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCgkJCQkKCQkJCXRoaXMuJHJlZnNbcnVsZUZvcm1dLnZhbGlkYXRlKCh2YWxpZCkgPT4gewoJCQkJICBpZiAodmFsaWQpIHsKCQkJCQlsZXQgdGVybSA9IHRoaXMucnVsZUZvcm0uZGF0ZTIKCQkJCQlsZXQgdGltZSA9IHRoaXMucnVsZUZvcm0uZGVhZGxpbmUKCQkJCQl0aW1lLnNldEhvdXJzKHRlcm0uZ2V0SG91cnMoKSkKCQkJCQl0aW1lLnNldE1pbnV0ZXModGVybS5nZXRNaW51dGVzKCkpCgkJCQkJdGltZS5zZXRTZWNvbmRzKHRlcm0uZ2V0U2Vjb25kcygpKQoJCQkJCXRpbWUuc2V0TWlsbGlzZWNvbmRzKHRlcm0uZ2V0TWlsbGlzZWNvbmRzKCkpCgkJCQkJCgkJCQkJdGhpcy5ydWxlRm9ybS5kZWFkbGluZSA9IHRpbWUudmFsdWVPZigpCgkJCQkJLy8gY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSkKCQkJCQl0aGlzLnVwZGF0ZVRhc2soKQoJCQkJCQkJCQoJCQkJICB9IGVsc2UgewoJCQkJICAgIC8vIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwoJCQkJICAgIHJldHVybiBmYWxzZTsKCQkJCSAgfQoJCQkJfSk7CgkJCX0sCgkJCWFzeW5jIHVwZGF0ZVRhc2soKXsKCQkJCWxldCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvdGFzay91cGRhdGUnLHRoaXMucnVsZUZvcm0pCgkJCQkKCQkJCWlmKHJlcy5jb2RlID09PSAwKXsKCQkJCQl0aGlzLmZpbmRBbGwoKQoJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQoJCQkJfSBlbHNlCgkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQoJCQl9CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVkKCkgewogICAgICAgICAgICB0aGlzLmZpbmRBbGwoKTsKICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["History.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"History.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-page-header @back=\"goBack\">\r\n\t\t</el-page-header><br />\r\n\t\t<el-table\r\n\t\t\tsize=\"small\"\r\n\t\t    :data=\"tableData\"\r\n\t\t    border\r\n\t\t    style=\"width: 100%\">\r\n\t\t   \r\n\t\t    <el-table-column\r\n\t\t\t  fixed\r\n\t\t      prop=\"info\"\r\n\t\t      label=\"标题\"\r\n\t\t      width=\"150\">\r\n\t\t    </el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\t  \r\n\t\t\t  prop=\"deadline\"\r\n\t\t\t  label=\"截止日期\"\r\n\t\t\t  width=\"150\">\r\n\t\t\t</el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"precautions\"\r\n\t\t      label=\"注意事项\"\r\n\t\t      width=\"300\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t\t  prop=\"sstId\"\r\n\t\t      fixed=\"right\"\r\n\t\t      label=\"操作\"\r\n\t\t      width=\"90\">\r\n\t\t      <template slot-scope=\"scope\">\r\n\t\t\t\t<i>\r\n\t\t\t\t\t<!-- <template>\r\n\t\t\t\t\t<el-popconfirm\r\n\t\t\t\t\t  title=\"这是一段内容确定删除吗？\"> -->\r\n\t\t\t\t\t  <el-button v-on:click=\"edit(scope.row.sstId)\" slot=\"reference\" type=\"text\" size=\"small\">编辑</el-button>\r\n\t\t\t\t\t<!-- </el-popconfirm>\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</i>\r\n\t\t\t\t<i style=\"float: right;\">\r\n\t\t\t\t\t<template>\r\n\t\t\t\t\t<el-popconfirm\r\n\t\t\t\t\t  @onConfirm=\"deleteHandle(scope.row.sstId)\"\r\n\t\t\t\t\t  title=\"这将导致本期已提交的同学的截图全部删除,确定删除吗？\">\r\n\t\t\t\t\t  <el-button slot=\"reference\" type=\"text\" size=\"small\" style=\"color: #FF0000;\">删除</el-button>\r\n\t\t\t\t\t</el-popconfirm>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</i>\r\n\t\t\t\t\r\n\t\t      </template>\r\n\t\t    </el-table-column>\r\n\t\t  </el-table>\r\n\t\t  \r\n\t\t  <!-- 修改的dialog -->\r\n\t\t  <el-dialog title=\"修改任务\" :visible.sync=\"dialogFormVisible\">\r\n\t\t    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t      <el-form-item label=\"标题\" prop=\"info\">\r\n\t\t        <el-input v-model=\"ruleForm.info\"></el-input>\r\n\t\t      </el-form-item>\r\n\t\t      <el-form-item label=\"截止时间\" required>\r\n\t\t        <el-col :span=\"11\">\r\n\t\t          <el-form-item prop=\"deadline\">\r\n\t\t            <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"ruleForm.deadline\" style=\"width: 100%;\"></el-date-picker>\r\n\t\t          </el-form-item>\r\n\t\t        </el-col>\r\n\t\t        <el-col class=\"line\" :span=\"2\">-</el-col>\r\n\t\t        <el-col :span=\"11\">\r\n\t\t          <el-form-item prop=\"date2\">\r\n\t\t            <el-time-picker placeholder=\"选择时间\" v-model=\"ruleForm.date2\" style=\"width: 100%;\"></el-time-picker>\r\n\t\t          </el-form-item>\r\n\t\t        </el-col>\r\n\t\t      </el-form-item>\r\n\t\t      </el-form-item>\r\n\t\t      <el-form-item label=\"注意事项\" prop=\"precautions\">\r\n\t\t        <el-input type=\"textarea\" v-model=\"ruleForm.precautions\"></el-input>\r\n\t\t      </el-form-item>\r\n\t\t    </el-form>\r\n\t\t    <div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t      <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t      <el-button type=\"primary\" v-on:click=\"update('ruleForm')\">确 定</el-button>\r\n\t\t    </div>\r\n\t\t  </el-dialog>\r\n\t</div>\n</template>\n\n<script>\n  export default {\n    data() {\r\n            return {\r\n                tableData: [\r\n\t\t\t\t\t\r\n    \t\t\t],\r\n\t\t\t\tdialogFormVisible:false,\r\n\t\t\t\truleForm: {\r\n\t\t\t\t  sstId:'',\r\n\t\t\t\t  info: '',\r\n\t\t\t\t  deadline: '',\r\n\t\t\t\t  date2: '',\r\n\t\t\t\t  \r\n\t\t\t\t  type: '',\r\n\t\t\t\t  precautions: ''\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\trules: {\r\n\t\t\t\t  info: [\r\n\t\t\t\t    { required: true, message: '请输入活动名称', trigger: 'blur' },\r\n\t\t\t\t    { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\r\n\t\t\t\t  ],\r\n\t\t\t\t  deadline: [\r\n\t\t\t\t    { type: 'date', required: true, message: '请选择日期', trigger: 'change' }\r\n\t\t\t\t  ],\r\n\t\t\t\t  date2: [\r\n\t\t\t\t    { type: 'date', required: true, message: '请选择时间', trigger: 'change' }\r\n\t\t\t\t  ],\r\n\t\t\t\t  type: [\r\n\t\t\t\t    { type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change' }\r\n\t\t\t\t  ],\r\n\t\t\t\t  precautions: [\r\n\t\t\t\t    { required: true, message: '请填写活动形式', trigger: 'blur' }\r\n\t\t\t\t  ]\r\n\t\t\t\t}\r\n            }\r\n        },\r\n        methods: {\r\n\t\t\tformatter(row, column) {\r\n\t\t\t    return row.name;\r\n\t\t\t},\r\n\t\t\tfilterTag(value, row) {\r\n\t\t\t    return row.tag === value;\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tconsole.log('go back');\r\n\t\t    },\r\n            findAll: async function () {\r\n                let {data:res} = await this.$http.get('/task/history')\r\n\t\t\t    this.tableData = res\r\n\t\t\t\t// console.log(res)\r\n            },\r\n\t\t\tasync deleteHandle(sstId){\r\n\t\t\t\tlet {data:res} = await this.$http.get('/task/delOne',{\r\n\t\t\t\t\tparams:{sstId:sstId}\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\tif(res.code === 0) {\r\n\t\t\t\t\tthis.$message.success(\"删除成功\")\r\n\t\t\t\t\tthis.findAll()\r\n\t\t\t\t}\r\n\t\t\t\telse this.$message.error(\"删除失败\")\t\r\n\t\t\t},\r\n\t\t\tasync edit(sstId){\r\n\t\t\t\tthis.dialogFormVisible = true\r\n\t\t\t\tlet {data:res} = await this.$http.get('/task/findOne',{\r\n\t\t\t\t\tparams:{sstId:sstId}\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\tthis.ruleForm = res\r\n\t\t\t\t\r\n\t\t\t\tlet date = new Date(res.deadline)\r\n\t\t\t\tthis.ruleForm.deadline = date\r\n\t\t\t\tthis.ruleForm.date2 = date\t\r\n\t\t\t},\r\n\t\t\tupdate(ruleForm){\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t  if (valid) {\r\n\t\t\t\t\tlet term = this.ruleForm.date2\r\n\t\t\t\t\tlet time = this.ruleForm.deadline\r\n\t\t\t\t\ttime.setHours(term.getHours())\r\n\t\t\t\t\ttime.setMinutes(term.getMinutes())\r\n\t\t\t\t\ttime.setSeconds(term.getSeconds())\r\n\t\t\t\t\ttime.setMilliseconds(term.getMilliseconds())\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ruleForm.deadline = time.valueOf()\r\n\t\t\t\t\t// console.log(this.ruleForm)\r\n\t\t\t\t\tthis.updateTask()\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t  } else {\r\n\t\t\t\t    // console.log('error submit!!');\r\n\t\t\t\t    return false;\r\n\t\t\t\t  }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync updateTask(){\r\n\t\t\t\tlet {data:res} = await this.$http.post('/task/update',this.ruleForm)\r\n\t\t\t\t\r\n\t\t\t\tif(res.code === 0){\r\n\t\t\t\t\tthis.findAll()\r\n\t\t\t\t\tthis.$message.success(res.msg)\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.$message.error(res.msg)\r\n\t\t\t}\r\n        },\r\n        created() {\r\n            this.findAll();\r\n        }\r\n    }\n</script>\n\n<style scoped=\"scoped\">\r\n  \n</style>\n\n"]}]}